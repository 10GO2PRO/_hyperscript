<!html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

</head>
<body style="padding:20px;font-family: sans-serif">
<script src="../../src/lib/core.js"></script>
<script src="../../src/lib/web.js"></script>
<script src="../../src/lib/eventsource.js"></script>

<em>Server Sent Events Playground</em>
<hr/>
<style>
    button {
        padding: 12px;
        margin: 12px
    }
</style>
<script type="text/hyperscript">

    eventsource MyEventSource http://localhost/posts.json?types=First,Second,Third,AsObject

        on First as string
            put it into #FirstDiv.innerHTML
        end

        on Second as string
            put it into #SecondDiv.innerHTML
        end

        on Third as string
            put it into #ThirdDiv.innerHTML
        end

        on AsObject as json
            log it
        end

        -- on open, on close, on error...
    end

</script>

<div>
    <button script="on click call MyEventSource.connect() then log 'connected'">Connect</button>
    <button script="on click call MyEventSource.close() then log 'closed'">Close</button>
</div>

<h3>First</h3>
<div id="FirstDiv">Waiting...</div>

<h3>Second</h3>
<div id="SecondDiv">Waiting...</div>

<h3>Third</h3>
<div id="ThirdDiv">Waiting...</div>

</body>
</html>
