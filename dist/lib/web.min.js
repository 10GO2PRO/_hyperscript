(function(){function s(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}_hyperscript.addCommand("settle",function(e,s,t){if(t.matchToken("settle")){if(!e.commandBoundary(t.currentToken())){var r=e.requireElement("expression",t)}else{var r=e.requireElement("implicitMeTarget",t)}var o={type:"settleCmd",args:[r],op:function(e,t){var r=null;var n=false;var i=false;var a=new Promise(function(e){r=e});t.addEventListener("transitionstart",function(){i=true},{once:true});setTimeout(function(){if(!i&&!n){r(s.findNext(o,e))}},500);t.addEventListener("transitionend",function(){if(!n){r(s.findNext(o,e))}},{once:true});return a},execute:function(e){return s.unifiedExec(this,e)}};return o}});_hyperscript.addCommand("add",function(e,n,t){if(t.matchToken("add")){var r=e.parseElement("classRef",t);var i=null;var a=null;if(r==null){i=e.parseElement("attributeRef",t);if(i==null){a=e.parseElement("objectLiteral",t);if(a==null){e.raiseParseError(t,"Expected either a class reference or attribute expression")}}}else{var s=[r];while(r=e.parseElement("classRef",t)){s.push(r)}}if(t.matchToken("to")){var o=e.requireElement("targetExpression",t)}else{var o=e.parseElement("implicitMeTarget",t)}if(s){var l={classRefs:s,to:o,args:[o],op:function(e,r){n.forEach(s,function(t){n.forEach(r,function(e){e.classList.add(t.className())})});return n.findNext(this,e)}}}else if(i){var l={type:"addCmd",attributeRef:i,to:o,args:[o,i],op:function(e,t,r){n.forEach(t,function(e){e.setAttribute(r.name,r.value)});return n.findNext(l,e)},execute:function(e){return n.unifiedExec(this,e)}}}else{var l={type:"addCmd",cssDeclaration:a,to:o,args:[o,a],op:function(e,t,r){n.forEach(t,function(e){for(var t in r){if(r.hasOwnProperty(t)){e.style.setProperty(t,r[t])}}});return n.findNext(l,e)},execute:function(e){return n.unifiedExec(this,e)}}}return l}});_hyperscript.addCommand("remove",function(e,n,t){if(t.matchToken("remove")){var r=e.parseElement("classRef",t);var i=null;var a=null;if(r==null){i=e.parseElement("attributeRef",t);if(i==null){a=e.parseElement("expression",t);if(a==null){e.raiseParseError(t,"Expected either a class reference, attribute expression or value expression")}}}else{var s=[r];while(r=e.parseElement("classRef",t)){s.push(r)}}if(t.matchToken("from")){var o=e.requireElement("targetExpression",t)}else{var o=e.requireElement("implicitMeTarget",t)}if(a){var l={elementExpr:a,from:o,args:[a],op:function(e,t){n.forEach(t,function(e){e.parentElement.removeChild(e)});return n.findNext(this,e)}}}else{var l={classRefs:s,attributeRef:i,elementExpr:a,from:o,args:[o],op:function(e,r){if(this.classRefs){n.forEach(s,function(t){n.forEach(r,function(e){e.classList.remove(t.className())})})}else{n.forEach(r,function(e){e.removeAttribute(i.name)})}return n.findNext(this,e)}}}return l}});_hyperscript.addCommand("toggle",function(e,o,t){if(t.matchToken("toggle")){if(t.matchToken("between")){var r=true;var n=e.parseElement("classRef",t);t.requireToken("and");var i=e.requireElement("classRef",t)}else{var n=e.parseElement("classRef",t);var a=null;if(n==null){a=e.parseElement("attributeRef",t);if(a==null){e.raiseParseError(t,"Expected either a class reference or attribute expression")}}else{var s=[n];while(n=e.parseElement("classRef",t)){s.push(n)}}}if(t.matchToken("on")){var l=e.requireElement("targetExpression",t)}else{var l=e.requireElement("implicitMeTarget",t)}if(t.matchToken("for")){var f=e.requireElement("timeExpression",t)}else if(t.matchToken("until")){var u=e.requireElement("dotOrColonPath",t,"Expected event name");if(t.matchToken("from")){var c=e.requireElement("expression",t)}}var m={classRef:n,classRef2:i,classRefs:s,attributeRef:a,on:l,time:f,evt:u,from:c,toggle:function(e,t){if(r){o.forEach(e,function(e){if(e.classList.contains(n.className())){e.classList.remove(n.className());e.classList.add(i.className())}else{e.classList.add(n.className());e.classList.remove(i.className())}})}else if(this.classRefs){o.forEach(this.classRefs,function(t){o.forEach(e,function(e){e.classList.toggle(t.className())})})}else{o.forEach(e,function(e){if(e.hasAttribute(a.name)){e.removeAttribute(a.name)}else{e.setAttribute(a.name,t)}})}},args:[l,a?a.value:null,f,u,c],op:function(r,n,i,t,a,s){if(t){return new Promise(function(e){m.toggle(n,i);setTimeout(function(){m.toggle(n,i);e(o.findNext(m,r))},t)})}else if(a){return new Promise(function(e){var t=s||r.me;t.addEventListener(a,function(){m.toggle(n,i);e(o.findNext(m,r))},{once:true});m.toggle(n,i)})}else{this.toggle(n,i);return o.findNext(m,r)}}};return m}});var o={display:function(e,t,r){if(r){t.style.display=r}else if(e==="hide"){t.style.display="none"}else{t.style.display="block"}},visibility:function(e,t,r){if(r){t.style.visibility=r}else if(e==="hide"){t.style.visibility="hidden"}else{t.style.visibility="visible"}},opacity:function(e,t,r){if(r){t.style.opacity=r}else if(e==="hide"){t.style.opacity="0"}else{t.style.opacity="1"}}};var l=function(e,t,r){var n;var i=r.currentToken();if(i.value==="with"||e.commandBoundary(i)){n=e.parseElement("implicitMeTarget",r)}else{n=e.parseElement("targetExpression",r)}return n};var f=function(e,t,r){var n=_hyperscript.config.defaultHideShowStrategy;var i=o;if(_hyperscript.config.hideShowStrategies){i=s(i,_hyperscript.config.hideShowStrategies)}r=r||n||"display";var a=i[r];if(a==null){e.raiseParseError(t,"Unknown show/hide strategy : "+r)}return a};_hyperscript.addCommand("hide",function(e,r,t){if(t.matchToken("hide")){var n=l(e,r,t);var i=null;if(t.matchToken("with")){i=t.requireTokenType("IDENTIFIER").value}var a=f(e,t,i);return{target:n,args:[n],op:function(e,t){r.forEach(t,function(e){a("hide",e)});return r.findNext(this,e)}}}});_hyperscript.addCommand("show",function(e,r,t){if(t.matchToken("show")){var n=l(e,r,t);var i=null;if(t.matchToken("with")){i=t.requireTokenType("IDENTIFIER").value}var a=null;if(t.matchOpToken(":")){var s=t.consumeUntilWhitespace();t.matchTokenType("WHITESPACE");a=s.map(function(e){return e.value}).join("")}var o=f(e,t,i);return{target:n,args:[n],op:function(e,t){r.forEach(t,function(e){o("show",e,a)});return r.findNext(this,e)}}}});_hyperscript.addCommand("trigger",function(e,n,t){if(t.matchToken("trigger")){var r=e.requireElement("dotOrColonPath",t);var i=e.parseElement("namedArgumentList",t);var a={eventName:r,details:i,args:[r,i],op:function(e,t,r){n.triggerEvent(e.me,t,r?r:{});return n.findNext(a,e)}};return a}});_hyperscript.addCommand("take",function(e,i,t){if(t.matchToken("take")){var r=e.parseElement("classRef",t);if(t.matchToken("from")){var n=e.requireElement("targetExpression",t)}else{var n=r}if(t.matchToken("for")){var a=e.requireElement("targetExpression",t)}else{var a=e.requireElement("implicitMeTarget",t)}var s={classRef:r,from:n,forElt:a,args:[n,a],op:function(e,t,r){var n=this.classRef.css.substr(1);i.forEach(t,function(e){e.classList.remove(n)});i.forEach(r,function(e){e.classList.add(n)});return i.findNext(this,e)}};return s}});function c(e,t,r){if(t){var n=e[t]}else{var n=e}if(n instanceof Element||n instanceof HTMLDocument){n.innerHTML=r}else{if(t){e[t]=r}else{throw"Don't know how to put a value into "+typeof e}}}_hyperscript.addCommand("put",function(e,n,t){if(t.matchToken("put")){var r=e.requireElement("expression",t);var i=t.matchAnyToken("into","before","after");if(i==null&&t.matchToken("at")){i=t.matchAnyToken("start","end");t.requireToken("of")}if(i==null){e.raiseParseError(t,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'")}var a=e.requireElement("targetExpression",t);var s=i.value;var o=false;var l=null;var f=null;if(a.type==="propertyAccess"&&s==="into"){f=a.prop.value;l=a.root}else if(a.type==="symbol"&&s==="into"){o=true;f=a.name}else{l=a}var u={target:a,operation:s,symbolWrite:o,value:r,args:[l,r],op:function(e,t,r){if(o){c(e,f,r)}else{if(s==="into"){n.forEach(t,function(e){c(e,f,r)})}else if(s==="before"){n.forEach(t,function(e){e.insertAdjacentHTML("beforebegin",r)})}else if(s==="start"){n.forEach(t,function(e){e.insertAdjacentHTML("afterbegin",r)})}else if(s==="end"){n.forEach(t,function(e){e.insertAdjacentHTML("beforeend",r)})}else if(s==="after"){n.forEach(t,function(e){e.insertAdjacentHTML("afterend",r)})}}return n.findNext(this,e)}};return u}});_hyperscript.addCommand("transition",function(e,h,t){if(t.matchToken("transition")){if(t.matchToken("the")||t.matchToken("element")||t.matchToken("elements")||t.currentToken().type==="CLASS_REF"||t.currentToken().type==="ID_REF"||t.currentToken().op&&t.currentToken().value==="<"){e.possessivesDisabled=true;try{var r=e.parseElement("expression",t)}finally{delete e.possessivesDisabled}if(t.matchOpToken("'")){t.requireToken("s")}}else if(t.currentToken().type==="IDENTIFIER"&&t.currentToken().value==="its"){var n=t.matchToken("its");var r={type:"transitionIts",token:n,name:n.value,evaluate:function(e){return h.resolveSymbol("it",e)}}}else{t.matchToken("my");var r=e.parseElement("implicitMeTarget",t)}var i=[];var a=[];var s=[];var o=t.currentToken();while(!e.commandBoundary(o)&&o.value!=="using"){i.push(e.requireElement("stringLike",t));if(t.matchToken("from")){a.push(e.requireElement("stringLike",t))}else{a.push(null)}t.requireToken("to");s.push(e.requireElement("stringLike",t));o=t.currentToken()}if(t.matchToken("using")){var l=e.requireElement("expression",t)}var f={to:s,args:[r,i,a,s,l],op:function(e,t,m,v,p,d){var r=[];h.forEach(t,function(c){var e=new Promise(function(a,e){var s=c.style.transition;c.style.transition=d||_hyperscript.config.defaultTransition;var o=h.getInternalData(c);var t=getComputedStyle(c);var r={};for(var n=0;n<t.length;n++){var i=t[n];var l=t[i];r[i]=l}if(!o.initalStyles){o.initalStyles=r}for(var n=0;n<m.length;n++){var f=m[n];var u=v[n];if(u=="computed"||u==null){c.style[f]=r[f]}else{c.style[f]=u}}setTimeout(function(){var e=[];for(var t=0;t<m.length;t++){var r=m[t];var n=p[t];if(n=="initial"){var i=o.initalStyles[r];c.style[r]=i}else{c.style[r]=n}}c.addEventListener("transitionend",function(){c.style.transition=s;a()},{once:true})},5)});r.push(e)});return Promise.all(r).then(function(){return h.findNext(f,e)})}};return f}});_hyperscript.addLeafExpression("closestExpr",function(e,t,r){if(r.matchToken("closest")){var n=e.parseElement("targetExpression",r);if(n.css==null){e.raiseParseError(r,"Expected a CSS expression")}if(r.matchToken("to")){var i=e.parseElement("targetExpression",r)}else{var i=e.parseElement("implicitMeTarget",r)}return{expr:n,to:i,args:[i],op:function(e,t){return t==null?null:t.closest(n.css)},evaluate:function(e){return t.unifiedEval(this,e)}}}});_hyperscript.config.conversions["Values"]=function(e){var n={};var i=_hyperscript.internals.runtime.forEach;i(e,function(e){var t=s(e);if(t!==undefined){n[t.name]=t.value;return}if(e.querySelectorAll!=undefined){var r=e.querySelectorAll("input,select,textarea");i(r,a)}});return n;function a(e){var t=s(e);if(t==undefined){return}if(n[t.name]==undefined){n[t.name]=t.value;return}if(Array.isArray(n[t.name])&&Array.isArray(t.value)){n[t.name]=[].concat(n[t.name],t.value);return}}function s(e){try{var t={name:e.name,value:e.value};if(t.name==undefined||t.value==undefined){return undefined}if(e.type=="radio"&&e.checked==false){return undefined}if(e.type=="checkbox"){if(e.checked==false){t.value=undefined}else if(typeof t.value==="string"){t.value=[t.value]}}if(e.type=="select-multiple"){var r=e.querySelectorAll("option[selected]");t.value=[];for(var n=0;n<r.length;n++){t.value.push(r[n].value)}}return t}catch(e){return undefined}}}})();