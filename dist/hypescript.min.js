(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else{e.hypescript=t()}})(typeof self!=="undefined"?self:this,function(){return function(){"use strict";function t(e){if(e==="null"||e==="false"||e===""){return null}else if(e.lastIndexOf("ms")===e.length-2){return parseFloat(e.substr(0,e.length-2))}else if(e.lastIndexOf("s")===e.length-1){return parseFloat(e.substr(0,e.length-1))*1e3}else{return parseFloat(e)}}function n(e){return e.split(/\s+/)}function r(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function o(e){if(r(e,"form"))return"submit";if(r(e,"input, textarea, select"))return"change";return"click"}function i(e,t){if(e[0]===t){e.shift();return true}else{return false}}function a(e,t){return function(){u(e,t.slice(0))}}function u(e,t){if(t.length>0){var n=t.shift();if(n.operation.type==="wait"){setTimeout(function(){u(e,t)},n.operation.time)}else{l(e,n);u(e,t)}}}function f(e,t){return function(){return eval(e)}.call(t)}function l(e,t){if(t.operation.on){var n=document.querySelectorAll(t.operation.on.value)}else{var n=[e]}for(var r=0;r<n.length;r++){var i=n[r];if(t.operation.type==="add"){i.classList.add(t.operation.value)}else if(t.operation.type==="remove"){i.classList.remove(t.operation.value)}else if(t.operation.type==="toggle"){i.classList.toggle(t.operation.value)}else if(t.operation.type==="call"){f(t.operation.expr,e)}}}function s(e){if(i(e,"on")){return{type:"on",value:e.shift()}}}function c(e){if(i(e,"add")){return{type:"add",value:e.shift(),on:s(e)}}}function p(e){if(i(e,"remove")){return{type:"remove",value:e.shift(),on:s(e)}}}function h(e){if(i(e,"toggle")){return{type:"toggle",value:e.shift(),on:s(e)}}}function v(e){if(i(e,"call")){var t={type:"call",expr:""};while(e.length>0){if(e[0]!=="then"){t.expr+=" "+e.shift()}}return t}}function d(e){if(i(e,"wait")){return{type:"wait",time:t(e.shift())}}}function y(e){var t=c(e);if(t)return t;t=p(e);if(t)return t;t=h(e);if(t)return t;t=v(e);if(t)return t;t=d(e);if(t)return t}function g(e){return{type:"action",operation:y(e)}}function m(e){var t={on:s(e),actions:[]};do{t.actions.push(g(e))}while(i(e,"then"));return t}function S(e){var t=n(e);return m(t)}function b(e){if(e){var t=e.getAttribute("_")||e.getAttribute("hypescript")||e.getAttribute("data-hypescript");var n=S(t);if(n.on){var r=n.on.value}else{var r=o(e)}e.addEventListener(r,a(e,n.actions))}else{var i=function(){var e=document.querySelectorAll("[_], [hypescript], [data-hypescript]");for(var t=0;t<e.length;t++){var n=e[t];b(n)}};if(document.readyState!=="loading"){i()}else{document.addEventListener("DOMContentLoaded",i)}}}return{getHyped:b}}()});